<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ICNX.App.ViewModels"
             x:Class="ICNX.App.Views.Controls.DownloadSessionCard"
             x:DataType="vm:DownloadSessionViewModel">

    <Border Background="{StaticResource SurfaceGlassBrush}" 
            BorderBrush="{StaticResource BorderDefaultBrush}"
            BorderThickness="1"
            CornerRadius="12"
            Padding="16"
            Margin="0,0,0,12">
        
        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="Auto,*,Auto">
            
            <!-- Session Icon -->
            <Border Grid.Row="0" Grid.Column="0"
                    Background="#606366F1" 
                    CornerRadius="8" 
                    Width="40" 
                    Height="40" 
                    Margin="0,0,12,0">
                <TextBlock Text="⬇" 
                           FontSize="16" 
                           Foreground="White"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"/>
            </Border>
            
            <!-- Session Info -->
            <StackPanel Grid.Row="0" Grid.Column="1" Spacing="2">
                <TextBlock Text="{Binding Title}" 
                           FontSize="16" 
                           FontWeight="SemiBold" 
                           Foreground="{StaticResource TextPrimaryBrush}"/>
                <TextBlock Text="{Binding CreatedAt, StringFormat='Created {0:MMM dd, yyyy HH:mm}'}" 
                           FontSize="11" 
                           Foreground="{StaticResource TextMutedBrush}"/>
            </StackPanel>
            
            <!-- Session Status Badge -->
            <Border Grid.Row="0" Grid.Column="2" 
                    Background="#FF3B82F6" 
                    CornerRadius="12" 
                    Padding="8,4">
                <TextBlock Text="{Binding StatusText}" 
                           FontSize="11" 
                           FontWeight="SemiBold" 
                           Foreground="White"/>
            </Border>
            
            <!-- Progress Bar -->
            <Grid Grid.Row="1" Grid.ColumnSpan="3" Margin="0,12,0,8">
                <ProgressBar Value="{Binding OverallProgress}" 
                             Maximum="100"
                             Background="{StaticResource SurfaceBaseBrush}"
                             Foreground="{StaticResource ProgressGradientBrush}"
                             Height="8"
                             CornerRadius="4"/>
                
                <TextBlock Text="{Binding ProgressText}" 
                           FontSize="10" 
                           FontWeight="Medium"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           HorizontalAlignment="Right" 
                           VerticalAlignment="Center"
                           Margin="0,0,4,0"/>
            </Grid>
            
            <!-- Action Buttons -->
            <StackPanel Grid.Row="2" Grid.ColumnSpan="3" 
                        Orientation="Horizontal" 
                        Spacing="8" 
                        HorizontalAlignment="Right">
                
                <!-- Pause Button -->
                <Button Background="Transparent"
                        BorderBrush="{StaticResource BorderDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="8,4"
                        IsVisible="{Binding CanPause}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="⏸" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="Pause" FontSize="11" FontWeight="Medium" Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Button>
                
                <!-- Resume Button -->
                <Button Background="{StaticResource AccentPrimaryBrush}"
                        BorderThickness="0"
                        CornerRadius="6"
                        Padding="8,4"
                        IsVisible="{Binding CanResume}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="▶" FontSize="12" Foreground="White"/>
                        <TextBlock Text="Resume" FontSize="11" FontWeight="Medium" Foreground="White"/>
                    </StackPanel>
                </Button>
                
                <!-- Cancel Button -->
                <Button Background="#FFEF4444"
                        BorderThickness="0"
                        CornerRadius="6"
                        Padding="8,4"
                        IsVisible="{Binding CanCancel}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="✕" FontSize="12" Foreground="White"/>
                        <TextBlock Text="Cancel" FontSize="11" FontWeight="Medium" Foreground="White"/>
                    </StackPanel>
                </Button>
                
                <!-- Details Button -->
                <Button Background="Transparent"
                        BorderBrush="{StaticResource BorderDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="8,4">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="👁" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="Details" FontSize="11" FontWeight="Medium" Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Button>
            </StackPanel>
            
        </Grid>
        
    </Border>

</UserControl>